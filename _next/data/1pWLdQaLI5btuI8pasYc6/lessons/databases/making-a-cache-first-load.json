{"pageProps":{"post":{"attributes":{},"html":"<h1 id=\"cache-first-menu\">Cache First Menu</h1>\n<p>At <code>Menu.js</code> change the <code>load</code> method with the following one and analyze the database created and the algorithm.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-attr\">load</span>: <span class=\"hljs-keyword\">async</span> () =&gt; {\n    <span class=\"hljs-comment\">// Cache First</span>\n    <span class=\"hljs-keyword\">const</span> db = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title class_\">Menu</span>.<span class=\"hljs-title function_\">openDB</span>();\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">await</span> db.<span class=\"hljs-title function_\">count</span>(<span class=\"hljs-string\">&#x27;categories&#x27;</span>) == <span class=\"hljs-number\">0</span>) {\n        <span class=\"hljs-keyword\">const</span> data = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-variable constant_\">API</span>.<span class=\"hljs-title function_\">fetchMenu</span>();\n        data.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">category</span> =&gt;</span> db.<span class=\"hljs-title function_\">add</span>(<span class=\"hljs-string\">&#x27;categories&#x27;</span>, category));\n    }\n    <span class=\"hljs-title class_\">Menu</span>.<span class=\"hljs-property\">data</span> = <span class=\"hljs-keyword\">await</span> db.<span class=\"hljs-title function_\">getAll</span>(<span class=\"hljs-string\">&#x27;categories&#x27;</span>);\n    <span class=\"hljs-title class_\">Menu</span>.<span class=\"hljs-title function_\">render</span>();\n}\n</code></pre>\n","slug":"making-a-cache-first-load","title":"Making a Cache First Load","section":"Databases","icon":"database","filePath":"/Users/firt/Library/Mobile Documents/com~apple~CloudDocs/Trainings/FEM/DataStorage/browser-storage/lessons/03-databases/D-making-a-cache-first-load.md","nextSlug":"/browser-storage/lessons/databases/using-a-network-first-load","prevSlug":"/browser-storage/lessons/databases/creating-a-database-for-the-menu"}},"__N_SSG":true}