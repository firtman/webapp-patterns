{"pageProps":{"post":{"attributes":{},"html":"<h1 id=\"using-the-filesystem-api\">Using the FileSystem API</h1>\n<p>Now, within <code>Order.js</code> add the following two methods</p>\n<pre><code class=\"hljs language-js\">    <span class=\"hljs-attr\">importCart</span>: <span class=\"hljs-keyword\">async</span> () =&gt; {\n        <span class=\"hljs-keyword\">const</span> [ handle ] = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">showOpenFilePicker</span>();\n        <span class=\"hljs-keyword\">const</span> file = <span class=\"hljs-keyword\">await</span> handle.<span class=\"hljs-title function_\">getFile</span>();\n        <span class=\"hljs-keyword\">try</span> {\n            <span class=\"hljs-keyword\">const</span> content = <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">parse</span>(<span class=\"hljs-keyword\">await</span> file.<span class=\"hljs-title function_\">text</span>());\n            <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(content);\n            <span class=\"hljs-keyword\">if</span> (content <span class=\"hljs-keyword\">instanceof</span> <span class=\"hljs-title class_\">Array</span> &amp;&amp; content.<span class=\"hljs-property\">length</span> &gt; <span class=\"hljs-number\">0</span>) {\n                <span class=\"hljs-title class_\">Order</span>.<span class=\"hljs-property\">cart</span> = content;\n            } <span class=\"hljs-keyword\">else</span> {\n                <span class=\"hljs-title function_\">alert</span>(<span class=\"hljs-string\">&quot;File is invalid&quot;</span>);\n            }\n            <span class=\"hljs-title class_\">Order</span>.<span class=\"hljs-title function_\">render</span>();\n        } <span class=\"hljs-keyword\">catch</span> (e) {\n            <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(e);\n            <span class=\"hljs-title function_\">alert</span>(<span class=\"hljs-string\">&quot;File is invalid&quot;</span>);\n        }\n    },\n    <span class=\"hljs-attr\">exportCart</span>: <span class=\"hljs-keyword\">async</span> () =&gt; {\n        <span class=\"hljs-keyword\">const</span> handle = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">showSaveFilePicker</span>({\n            <span class=\"hljs-attr\">types</span>: [{\n              <span class=\"hljs-attr\">description</span>: <span class=\"hljs-string\">&quot;JSON Cart File&quot;</span>,\n              <span class=\"hljs-attr\">accept</span>: {\n                <span class=\"hljs-string\">&quot;application/json&quot;</span>: [<span class=\"hljs-string\">&quot;.json&quot;</span>],\n              },\n            }]\n        });\n        <span class=\"hljs-keyword\">const</span> file = <span class=\"hljs-keyword\">await</span> handle.<span class=\"hljs-title function_\">getFile</span>();\n        <span class=\"hljs-keyword\">const</span> writable = <span class=\"hljs-keyword\">await</span> handle.<span class=\"hljs-title function_\">createWritable</span>();\n        <span class=\"hljs-keyword\">await</span> writable.<span class=\"hljs-title function_\">write</span>(<span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>(<span class=\"hljs-title class_\">Order</span>.<span class=\"hljs-property\">cart</span>));\n        <span class=\"hljs-keyword\">await</span> writable.<span class=\"hljs-title function_\">close</span>();\n    },\n</code></pre>\n","slug":"using-the-filesystem-api","title":"Using the Filesystem Api","section":"File System","icon":"folder-open","filePath":"/Users/firt/Library/Mobile Documents/com~apple~CloudDocs/Trainings/FEM/DataStorage/browser-storage/lessons/05-file-system/B-using-the-filesystem-api.md","nextSlug":"/browser-storage/lessons/bonus/next-steps","prevSlug":"/browser-storage/lessons/file-system/setup-import-and-export"}},"__N_SSG":true}