{"pageProps":{"post":{"attributes":{},"html":"<h1 id=\"setting-up-the-router\">Setting up the Router</h1>\n<p>Open again <code>services/Router.js</code>. Replace the code after the switch in the <code>go</code> method:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">if</span> (pageElement) {\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">changePage</span>(<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-comment\">// get current page element            </span>\n        <span class=\"hljs-keyword\">let</span> currentPage = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;main&quot;</span>).<span class=\"hljs-property\">firstElementChild</span>; \n        <span class=\"hljs-keyword\">if</span> (currentPage) {                \n            currentPage.<span class=\"hljs-title function_\">remove</span>();\n            <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;main&quot;</span>).<span class=\"hljs-title function_\">appendChild</span>(pageElement);\n        } <span class=\"hljs-keyword\">else</span> {\n            <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;main&quot;</span>).<span class=\"hljs-title function_\">appendChild</span>(pageElement);\n        }\n    }\n    <span class=\"hljs-comment\">// Progressive Enhancement</span>\n    <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">startViewTransition</span>) {\n        <span class=\"hljs-title function_\">changePage</span>();                \n    } <span class=\"hljs-keyword\">else</span> {\n        <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">startViewTransition</span>(<span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-title function_\">changePage</span>());\n    }\n}\n\n<span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">scrollX</span> = <span class=\"hljs-number\">0</span>;\n</code></pre>\n<p>Now try changing the route again and see the cross fade animation happening.</p>\n<h1 id=\"customize-the-timings\">Customize the timings</h1>\n<p>Open <code>styles.css</code> and add the following code:</p>\n<pre><code class=\"hljs language-css\">\n::<span class=\"hljs-built_in\">view-transition-old</span>(root),\n::<span class=\"hljs-built_in\">view-transition-new</span>(root) {\n  <span class=\"hljs-attribute\">animation-duration</span>: <span class=\"hljs-number\">1s</span>;\n}\n</code></pre>\n<h1 id=\"customize-the-animation\">Customize the animation</h1>\n<p>Add the following styles:</p>\n<pre><code class=\"hljs language-css\">\n<span class=\"hljs-keyword\">@keyframes</span> fade-in {\n    <span class=\"hljs-selector-tag\">from</span> { <span class=\"hljs-attribute\">opacity</span>: <span class=\"hljs-number\">0</span>; }\n  }\n  \n  <span class=\"hljs-keyword\">@keyframes</span> fade-out {\n    <span class=\"hljs-selector-tag\">to</span> { <span class=\"hljs-attribute\">opacity</span>: <span class=\"hljs-number\">0</span>; }\n  }\n  \n  <span class=\"hljs-keyword\">@keyframes</span> slide-from-right {\n    <span class=\"hljs-selector-tag\">from</span> { <span class=\"hljs-attribute\">transform</span>: <span class=\"hljs-built_in\">translateX</span>(<span class=\"hljs-number\">60px</span>); }\n  }\n  \n  <span class=\"hljs-keyword\">@keyframes</span> slide-to-left {\n    <span class=\"hljs-selector-tag\">to</span> { <span class=\"hljs-attribute\">transform</span>: <span class=\"hljs-built_in\">translateX</span>(-<span class=\"hljs-number\">60px</span>); }\n  }\n  \n  ::<span class=\"hljs-built_in\">view-transition-old</span>(root) {\n    <span class=\"hljs-attribute\">animation</span>: <span class=\"hljs-number\">90ms</span> <span class=\"hljs-built_in\">cubic-bezier</span>(<span class=\"hljs-number\">0.4</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>) both fade-out,\n      <span class=\"hljs-number\">300ms</span> <span class=\"hljs-built_in\">cubic-bezier</span>(<span class=\"hljs-number\">0.4</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0.2</span>, <span class=\"hljs-number\">1</span>) both slide-to-left;\n  }\n  \n  ::<span class=\"hljs-built_in\">view-transition-new</span>(root) {\n    <span class=\"hljs-attribute\">animation</span>: <span class=\"hljs-number\">210ms</span> <span class=\"hljs-built_in\">cubic-bezier</span>(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0.2</span>, <span class=\"hljs-number\">1</span>) <span class=\"hljs-number\">90ms</span> both fade-in,\n      <span class=\"hljs-number\">300ms</span> <span class=\"hljs-built_in\">cubic-bezier</span>(<span class=\"hljs-number\">0.4</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0.2</span>, <span class=\"hljs-number\">1</span>) both slide-from-right;\n  }\n</code></pre>\n<h1 id=\"keep-the-header-out-of-the-transition\">Keep the header out of the transition</h1>\n<p>Add the following code:</p>\n<pre><code class=\"hljs language-css\"> <span class=\"hljs-selector-tag\">body</span>&gt;<span class=\"hljs-selector-tag\">header</span> {\n    view-<span class=\"hljs-attribute\">transition</span>-name: main-header;    \n}\n</code></pre>\n","slug":"adding-view-transitions","title":"Adding View Transitions","section":"Single Page Applications","icon":"database","filePath":"/Users/firt/Library/Mobile Documents/com~apple~CloudDocs/Trainings/FEM2024/WebAppPatterns/companion-src/lessons/03-single-page-applications/C-adding-view-transitions.md","nextSlug":"/webapp-patterns/lessons/single-page-applications/morphing-elements-from-different-pages","prevSlug":"/webapp-patterns/lessons/single-page-applications/using-lazy-load"}},"__N_SSG":true}