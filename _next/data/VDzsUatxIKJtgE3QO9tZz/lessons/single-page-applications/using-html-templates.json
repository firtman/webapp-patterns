{"pageProps":{"post":{"attributes":{},"html":"<h1 id=\"change-the-template\">Change the template</h1>\n<p>Open <code>index.html</code> and find <code>&lt;template id=&quot;cart-item-template&quot;&gt;</code>, update the code so it will look like:</p>\n<pre><code class=\"hljs language-js\">&lt;template id=<span class=\"hljs-string\">&quot;cart-item-template&quot;</span>&gt;\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&#x27;qty&#x27;</span>&gt;</span>${qty}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&#x27;name&#x27;</span>&gt;</span>${name}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&#x27;price&#x27;</span>&gt;</span>${price}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&#x27;toolbar&#x27;</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;#&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;delete-button&quot;</span>&gt;</span>\n                üóëÔ∏è\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span></span>\n&lt;/template&gt;\n</code></pre>\n<h1 id=\"change-the-implementation\">Change the implementation</h1>\n<p>Open <code>components/CartItem.js</code> and we will work with the <code>connectedCallback()</code> method.</p>\n<p>Add the following local function:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">interpolate</span> (str, params) {\n    <span class=\"hljs-keyword\">let</span> names = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">keys</span>(params);\n    <span class=\"hljs-keyword\">let</span> values = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">values</span>(params);\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Function</span>(...names, <span class=\"hljs-string\">`return \\`<span class=\"hljs-subst\">${str}</span>\\`;`</span>)(...values);\n}\n</code></pre>\n<p>Delete the following lines:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">appendChild</span>(content);    \n<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;.qty&quot;</span>).<span class=\"hljs-property\">textContent</span> = <span class=\"hljs-string\">`<span class=\"hljs-subst\">${item.quantity}</span>x`</span>;\n<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;.name&quot;</span>).<span class=\"hljs-property\">textContent</span> = item.<span class=\"hljs-property\">product</span>.<span class=\"hljs-property\">name</span>;\n<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;.price&quot;</span>).<span class=\"hljs-property\">textContent</span> = <span class=\"hljs-string\">`$<span class=\"hljs-subst\">${item.product.price.toFixed(<span class=\"hljs-number\">2</span>)}</span>`</span>;\n</code></pre>\n<p>Replace them with:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> template = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&quot;cart-item-template&quot;</span>);\n<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">innerHTML</span> = <span class=\"hljs-title function_\">interpolate</span>(template.<span class=\"hljs-property\">innerHTML</span>, {\n        <span class=\"hljs-attr\">qty</span>: <span class=\"hljs-string\">`<span class=\"hljs-subst\">${item.quantity}</span>x`</span>, \n        <span class=\"hljs-attr\">price</span>: <span class=\"hljs-string\">`$<span class=\"hljs-subst\">${item.product.price.toFixed(<span class=\"hljs-number\">2</span>)}</span>`</span>,\n        <span class=\"hljs-attr\">name</span>: item.<span class=\"hljs-property\">product</span>.<span class=\"hljs-property\">name</span>\n});\n</code></pre>\n<p>The final code for the file should look like:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> { removeFromCart } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;../services/Order.js&quot;</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CartItem</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">HTMLElement</span> {\n    <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-variable language_\">super</span>();    \n    }   \n\n\n    <span class=\"hljs-title function_\">connectedCallback</span>(<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-keyword\">const</span> item = <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">parse</span>(<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">dataset</span>.<span class=\"hljs-property\">item</span>);\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">innerHTML</span> = <span class=\"hljs-string\">&quot;&quot;</span>; <span class=\"hljs-comment\">// Clear the element</span>\n\n        <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">interpolate</span> (str, params) {\n            <span class=\"hljs-keyword\">let</span> names = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">keys</span>(params);\n            <span class=\"hljs-keyword\">let</span> values = <span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">values</span>(params);\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Function</span>(...names, <span class=\"hljs-string\">`return \\`<span class=\"hljs-subst\">${str}</span>\\`;`</span>)(...values);\n        }\n        <span class=\"hljs-keyword\">const</span> template = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&quot;cart-item-template&quot;</span>);\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">innerHTML</span> = <span class=\"hljs-title function_\">interpolate</span>(template.<span class=\"hljs-property\">innerHTML</span>, {\n             <span class=\"hljs-attr\">qty</span>: <span class=\"hljs-string\">`<span class=\"hljs-subst\">${item.quantity}</span>x`</span>, \n             <span class=\"hljs-attr\">price</span>: <span class=\"hljs-string\">`$<span class=\"hljs-subst\">${item.product.price.toFixed(<span class=\"hljs-number\">2</span>)}</span>`</span>,\n             <span class=\"hljs-attr\">name</span>: item.<span class=\"hljs-property\">product</span>.<span class=\"hljs-property\">name</span>\n        });\n        \n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">querySelector</span>(<span class=\"hljs-string\">&quot;a.delete-button&quot;</span>).<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&quot;click&quot;</span>, <span class=\"hljs-function\"><span class=\"hljs-params\">event</span> =&gt;</span> {\n            <span class=\"hljs-title function_\">removeFromCart</span>(item.<span class=\"hljs-property\">product</span>.<span class=\"hljs-property\">id</span>);\n        })\n      }\n}\n\ncustomElements.<span class=\"hljs-title function_\">define</span>(<span class=\"hljs-string\">&quot;cart-item&quot;</span>, <span class=\"hljs-title class_\">CartItem</span>);\n</code></pre>\n","slug":"using-html-templates","title":"Using Html Templates","section":"Single Page Applications","icon":"database","filePath":"/Users/firt/Library/Mobile Documents/com~apple~CloudDocs/Trainings/FEM2024/WebAppPatterns/companion-src/lessons/03-single-page-applications/E-using-html-templates.md","nextSlug":"/webapp-patterns/lessons/single-page-applications/routing-metadata","prevSlug":"/webapp-patterns/lessons/single-page-applications/morphing-elements-from-different-pages"}},"__N_SSG":true}