{"pageProps":{"post":{"attributes":{},"html":"<p>Now let&#39;s add data persistence support by creating a <code>classes/storage.js</code> file with the following content:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">TodoList</span>, <span class=\"hljs-title class_\">TodoItem</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;./classes.js&quot;</span>;\n\n<span class=\"hljs-keyword\">const</span> todoList = <span class=\"hljs-title class_\">TodoList</span>.<span class=\"hljs-title function_\">getInstance</span>();\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">LocalStorage</span> = {\n    <span class=\"hljs-title function_\">load</span>(<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">localStorage</span>.<span class=\"hljs-title function_\">getItem</span>(<span class=\"hljs-string\">&quot;todos&quot;</span>)) {\n            <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> t <span class=\"hljs-keyword\">of</span> <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">parse</span>(<span class=\"hljs-variable language_\">localStorage</span>.<span class=\"hljs-title function_\">getItem</span>(<span class=\"hljs-string\">&quot;todos&quot;</span>))) {\n                todoList.<span class=\"hljs-title function_\">add</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TodoItem</span>(t.<span class=\"hljs-property\">text</span>));\n            }\n        }\n    },\n    <span class=\"hljs-title function_\">save</span>(<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(todoList.<span class=\"hljs-property\">items</span>);\n        <span class=\"hljs-keyword\">const</span> array = <span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">from</span>(todoList.<span class=\"hljs-property\">items</span>);\n        <span class=\"hljs-variable language_\">localStorage</span>.<span class=\"hljs-title function_\">setItem</span>(<span class=\"hljs-string\">&quot;todos&quot;</span>, <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>(array));\n    }\n}\ntodoList.<span class=\"hljs-title function_\">addObserver</span>(<span class=\"hljs-title class_\">LocalStorage</span>.<span class=\"hljs-property\">save</span>);\n</code></pre>\n<p>Finally, back in <code>app.js</code> add a <code>LocalStorage.load()</code> call in the <code>DOMContentLoaded</code> event.</p>\n","slug":"adding-storage","title":"Adding Storage","section":"Classic Patterns","icon":"tachometer-alt","filePath":"/Users/firt/Library/Mobile Documents/com~apple~CloudDocs/Trainings/FEM2024/WebAppPatterns/companion-src/lessons/02-classic-patterns/G-adding-storage.md","nextSlug":"/webapp-patterns/lessons/classic-patterns/adding-keyboard-shortcuts","prevSlug":"/webapp-patterns/lessons/classic-patterns/adjusting-appjs"}},"__N_SSG":true}