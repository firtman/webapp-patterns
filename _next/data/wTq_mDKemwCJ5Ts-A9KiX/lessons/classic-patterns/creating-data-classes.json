{"pageProps":{"post":{"attributes":{},"html":"<p>Create the file webapp/classes.js and add the following class declarations:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> { observerMixin } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;./mixins.js&quot;</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TodoItem</span> {\n    <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\">text</span>) {\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">text</span> = text;\n    }\n    <span class=\"hljs-title function_\">equals</span>(<span class=\"hljs-params\">other</span>) {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">text</span> == other.<span class=\"hljs-property\">text</span>;\n    }\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">TodoList</span> {\n    <span class=\"hljs-comment\">// Data</span>\n    #data = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Set</span>();\n    <span class=\"hljs-keyword\">get</span> <span class=\"hljs-title function_\">items</span>() { <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.#data }\n\n    <span class=\"hljs-comment\">// Singleton</span>\n    <span class=\"hljs-keyword\">static</span> instance=<span class=\"hljs-literal\">null</span>;\n    <span class=\"hljs-keyword\">static</span> {\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">instance</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">TodoList</span>();\n    }\n    <span class=\"hljs-keyword\">static</span> <span class=\"hljs-title function_\">getInstance</span>(<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">instance</span>;\n    }\n    <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-title class_\">TodoList</span>.<span class=\"hljs-property\">instance</span>) {\n            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(<span class=\"hljs-string\">&quot;Use TodoList.getInstance() instead.&quot;</span>);\n        }\n    }\n\n    <span class=\"hljs-comment\">// List Behaviour</span>\n    <span class=\"hljs-title function_\">add</span>(<span class=\"hljs-params\">todoItem</span>) {\n        <span class=\"hljs-keyword\">const</span> array = <span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">from</span>(<span class=\"hljs-variable language_\">this</span>.#data);\n        <span class=\"hljs-keyword\">const</span> todoExists = array.<span class=\"hljs-title function_\">filter</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">t</span>=&gt;</span>t.<span class=\"hljs-title function_\">equals</span>(todoItem)).<span class=\"hljs-property\">length</span>&gt;<span class=\"hljs-number\">0</span>;\n        <span class=\"hljs-keyword\">if</span> (!todoExists) {\n            <span class=\"hljs-variable language_\">this</span>.#data.<span class=\"hljs-title function_\">add</span>(todoItem);\n            <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">notify</span>();\n        }\n    }\n    <span class=\"hljs-title function_\">delete</span>(<span class=\"hljs-params\">todo</span>) {\n        <span class=\"hljs-keyword\">const</span> array = <span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">from</span>(<span class=\"hljs-variable language_\">this</span>.#data);\n        <span class=\"hljs-keyword\">const</span> todoToDelete = array.<span class=\"hljs-title function_\">filter</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">t</span>=&gt;</span>t.<span class=\"hljs-property\">text</span>==todo);\n        <span class=\"hljs-variable language_\">this</span>.#data.<span class=\"hljs-title function_\">delete</span>(todoToDelete[<span class=\"hljs-number\">0</span>]);\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">notify</span>();\n    }\n    <span class=\"hljs-title function_\">find</span>(<span class=\"hljs-params\">text</span>) {\n        <span class=\"hljs-keyword\">const</span> array = <span class=\"hljs-title class_\">Array</span>.<span class=\"hljs-title function_\">from</span>(<span class=\"hljs-variable language_\">this</span>.#data);\n        <span class=\"hljs-keyword\">return</span> array.<span class=\"hljs-title function_\">find</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">i</span>=&gt;</span>i.<span class=\"hljs-property\">text</span>==text);\n    }\n    <span class=\"hljs-title function_\">replaceList</span>(<span class=\"hljs-params\">list</span>) {\n        <span class=\"hljs-variable language_\">this</span>.#data = list;\n        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">notify</span>();\n    }\n}\n\n<span class=\"hljs-comment\">// Apply Observer mixin</span>\n<span class=\"hljs-title class_\">Object</span>.<span class=\"hljs-title function_\">assign</span>(<span class=\"hljs-title class_\">TodoList</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>, observerMixin);\n</code></pre>\n","slug":"creating-data-classes","title":"Creating Data Classes","section":"Classic Patterns","icon":"tachometer-alt","filePath":"/Users/firt/Library/Mobile Documents/com~apple~CloudDocs/Trainings/FEM2024/WebAppPatterns/companion-src/lessons/02-classic-patterns/D-creating-data-classes.md","nextSlug":"/webapp-patterns/lessons/classic-patterns/the-command-pattern","prevSlug":"/webapp-patterns/lessons/classic-patterns/creating-observer-in-mixin"}},"__N_SSG":true}